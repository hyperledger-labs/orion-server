<!doctype html>
<html class="docs-version-current" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.8">
<link rel="alternate" type="application/rss+xml" href="/orion-server/blog/rss.xml" title="Hyperledger Orion RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/orion-server/blog/atom.xml" title="Hyperledger Orion Atom Feed"><title data-react-helmet="true">Orion Docker | Hyperledger Orion</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:url" content="https://hyperledger-labs.github.io/orion-server/docs/getting-started/launching-one-node/docker"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="Orion Docker | Hyperledger Orion"><meta data-react-helmet="true" name="description" content="&lt;!--"><meta data-react-helmet="true" property="og:description" content="&lt;!--"><link data-react-helmet="true" rel="shortcut icon" href="/orion-server/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://hyperledger-labs.github.io/orion-server/docs/getting-started/launching-one-node/docker"><link data-react-helmet="true" rel="alternate" href="https://hyperledger-labs.github.io/orion-server/docs/getting-started/launching-one-node/docker" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://hyperledger-labs.github.io/orion-server/docs/getting-started/launching-one-node/docker" hreflang="x-default"><link rel="stylesheet" href="/orion-server/assets/css/styles.f8b45538.css">
<link rel="preload" href="/orion-server/assets/js/runtime~main.3b1b7571.js" as="script">
<link rel="preload" href="/orion-server/assets/js/main.08f2dd10.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#" class="skipToContent_Zhym">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/orion-server/"><div class="navbar__logo"><img src="/orion-server/img/logo.svg" alt="Orion" class="themedImage_X7X7 themedImage--light_n7cD"><img src="/orion-server/img/logo.svg" alt="Orion" class="themedImage_X7X7 themedImage--dark_WTCb"></div><b class="navbar__title">Orion</b></a><a class="navbar__item navbar__link" href="/orion-server/docs/introduction">Docs</a><a class="navbar__item navbar__link" href="/orion-server/blog">Blog</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/hyperledger-labs/orion-server" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_tjMl"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><div class="toggle_7DKP toggle_gM5N toggleDisabled_YcJ9"><div class="toggleTrack_pr3n" role="button" tabindex="-1"><div class="toggleTrackCheck_1VIP"><span class="toggleIcon_iGPa">ðŸŒœ</span></div><div class="toggleTrackX_-cNO"><span class="toggleIcon_iGPa">ðŸŒž</span></div><div class="toggleTrackThumb_4edW"></div></div><input type="checkbox" class="toggleScreenReader_BFa8" aria-label="Switch between dark and light mode"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docs-wrapper docs-doc-page"><div class="docPage_ntW3"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_Cy7D" type="button"></button><aside class="docSidebarContainer_ZbqI"><div class="sidebar_bpFd"><nav class="menu thin-scrollbar menu_fJBT"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/orion-server/docs/introduction">Hyperledger Orion</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#">Getting Started</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/orion-server/docs/getting-started/guide">Using Orion</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#" tabindex="0">Launching a Orion Node</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/orion-server/docs/getting-started/launching-one-node/overview">Overview</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/orion-server/docs/getting-started/launching-one-node/binary">Orion Executable</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/orion-server/docs/getting-started/launching-one-node/docker">Orion Docker</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/orion-server/docs/getting-started/launching-one-node/crypto-materials">Creating Crypto Material</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="0">Pre-requisite For Executing Transactions and Queries</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="0">Executing Transactions</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="0">Executing Queries</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="0">Executing Proof Generation and Verification</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Design Principles</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">User Cases</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Architecture and Design</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Security and Trust Model</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/orion-server/docs/rest-api-specifications">REST API Specification</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/orion-server/docs/roadmap">Roadmap</a></li></ul></nav></div></aside><main class="docMainContainer_QBea"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_R67y"><div class="docItemContainer_fRP7"><article><div class="tocCollapsible_caTw theme-doc-toc-mobile tocMobile_QgRD"><button type="button" class="clean-btn tocCollapsibleButton_YFWb">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Orion Docker</h1></header><h2 class="anchor anchorWithStickyNavbar_7Y9k" id="1-prerequisites">1) Prerequisites<a aria-hidden="true" class="hash-link" href="#1-prerequisites" title="Direct link to heading">â€‹</a></h2><p>To build a docker image, the following are the prerequisites which should be installed.</p><ul><li><strong><a href="https://github.com/git-guides/install-git" target="_blank" rel="noopener noreferrer">Git</a></strong>: To clone the code repository.</li><li><strong><a href="https://www.docker.com" target="_blank" rel="noopener noreferrer">Docker</a></strong>: To build the docker image and start Orion in a docker container.</li></ul><h2 class="anchor anchorWithStickyNavbar_7Y9k" id="2-orion-docker-image">2) Orion Docker Image<a aria-hidden="true" class="hash-link" href="#2-orion-docker-image" title="Direct link to heading">â€‹</a></h2><p>The Orion node can be launched by either</p><ul><li>Pulling the published docker image in the docker hub (or)</li><li>Building the image from scratch</li></ul><p>Next, we explain the both options.</p><h3 class="anchor anchorWithStickyNavbar_7Y9k" id="21-pull-orion-docker-image-from-docker-hub">2.1) Pull Orion Docker Image from Docker Hub<a aria-hidden="true" class="hash-link" href="#21-pull-orion-docker-image-from-docker-hub" title="Direct link to heading">â€‹</a></h3><p>The Orion docker image is available in the docker hub repository. To pull the image, execute the following command:</p><div class="codeBlockContainer_8VJT"><div class="codeBlockContent_meoT"><pre tabindex="0" class="prism-code language-undefined codeBlock_ltyB thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_ZWp2"><span class="token-line" style="color:#F8F8F2"><span class="token plain">docker pull orionbcdb/orion-server</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_TFIO clean-btn">Copy</button></div></div><h3 class="anchor anchorWithStickyNavbar_7Y9k" id="22-build-your-own-orion-docker-image">2.2) Build Your Own Orion Docker Image<a aria-hidden="true" class="hash-link" href="#22-build-your-own-orion-docker-image" title="Direct link to heading">â€‹</a></h3><p>If you would like to build your own image rather than pulling it from the docker hub, execute the following steps:</p><ol><li>Create the required directory using the command <code>mkdir -p github.com/hyperledger-labs</code></li><li>Change the current working directory to the above created directory by issuing the command <code>cd github.com/hyperledger-labs</code></li><li>Clone the server repository with <code>git clone https://github.com/hyperledger-labs/orion-server</code></li><li>Change the current working directory to the repository root directory by issuing <code>cd orion-server</code></li><li>To build the docker image, issue the command <code>make docker</code> which creates a docker image named <code>orionbcdb/orion-server</code></li></ol><h2 class="anchor anchorWithStickyNavbar_7Y9k" id="3-start-orion-in-a-docker-container">3) Start Orion in a Docker Container<a aria-hidden="true" class="hash-link" href="#3-start-orion-in-a-docker-container" title="Direct link to heading">â€‹</a></h2><p>To start a server node, we need a certificate authority and crypto materials for the server node and admin users. To simplify this task, we have provided sample crypto materials in <code>deployment/crypto/</code>.</p><p>Let&#x27;s start a node with the sample crypto materials:</p><div class="codeBlockContainer_8VJT"><div class="codeBlockContent_meoT docker"><pre tabindex="0" class="prism-code language-docker codeBlock_ltyB thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_ZWp2"><span class="token-line" style="color:#F8F8F2"><span class="token plain">docker run -it --rm -v $(pwd)/deployment/crypto/:/etc/orion-server/crypto -p 6001:6001 \</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    -p 7050:7050 orionbcdb/orion-server</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_TFIO clean-btn">Copy</button></div></div><p>Port <code>6001</code> is the Orion REST API port and should be used to access Orion using its REST API or <a href="https://github.com/hyperledger-labs/orion-sdk-go/" target="_blank" rel="noopener noreferrer">Go SDK</a></p><p>Port <code>7050</code> is used between nodes in a cluster for performing replication.</p><div class="admonition admonition-info alert alert--info"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</h5></div><div class="admonition-content"><p>To change the port <code>6001</code> and <code>7050</code>, we need to change the configuration file and map the host directory holding this configuration to <code>/etc/orion-server/config</code>
as explained next in <a href="#31-volumes-for-persistant-storage-configuration-and-crypto-materials">volumes</a>.</p></div></div><p>When we start a docker container with the above parameters, all data associated with the Orion-server stays within the container itself.
When the container is stopped and removed, all data is lost. For all examples used in this documentation, the container started with the above command is sufficient.</p><p>For persistent storage, we need to use docker volumes as shown next.</p><h3 class="anchor anchorWithStickyNavbar_7Y9k" id="31-volumes-for-persistant-storage-configuration-and-crypto-materials">3.1) Volumes for Persistant Storage, Configuration, and Crypto Materials<a aria-hidden="true" class="hash-link" href="#31-volumes-for-persistant-storage-configuration-and-crypto-materials" title="Direct link to heading">â€‹</a></h3><p>The Orion docker image has three mappable volumes:</p><ol><li><code>/var/orion-server/ledger</code><ul><li>This volume holds all blockchain data maintained by the Orion node. For a persistent storage of blockchain data, we need to map a host directory to this volume while starting the container.</li></ul></li><li><code>/etc/orion-server/config</code><ul><li>This area contains the server configuration <code>yml</code> files. Mapping is optional, and needed only when we want a custom configuration. For example, the default port on which the Orion node listens is <code>6001</code>. To change this, we need to update the configuration file. Sample configuration files are stored in <code>deployment/config-docker</code> folder.</li></ul></li><li><code>/etc/orion-server/crypto</code><ul><li>This area holds all required crypto materials. This volume must be mapped to a host folder. Sample crypto materials are stored in <code>deployment/crypto</code> folder. Never use pre-existing crypto materials in production environment.</li></ul></li></ol><p>To start the Orion container with all three volumes, execute the following command:</p><div class="codeBlockContainer_8VJT"><div class="codeBlockContent_meoT"><pre tabindex="0" class="prism-code language-undefined codeBlock_ltyB thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_ZWp2"><span class="token-line" style="color:#F8F8F2"><span class="token plain">docker run -it --rm -v $(pwd)/deployment/crypto/:/etc/orion-server/crypto \</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                    -v $(pwd)/ledger:/etc/orion-server/ledger \</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                    -v $(pwd)/deployment/config-docker:/etc/orion-server/config \</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                    -p 6001:6001 -p 7050:7050 orionbcdb/orion-server</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_TFIO clean-btn">Copy</button></div></div></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/orion-server/docs/getting-started/launching-one-node/binary"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Â« <!-- -->Orion Executable</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/orion-server/docs/getting-started/launching-one-node/crypto-materials"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Creating Crypto Material<!-- --> Â»</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_1gSR thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#1-prerequisites" class="table-of-contents__link toc-highlight">1) Prerequisites</a></li><li><a href="#2-orion-docker-image" class="table-of-contents__link toc-highlight">2) Orion Docker Image</a><ul><li><a href="#21-pull-orion-docker-image-from-docker-hub" class="table-of-contents__link toc-highlight">2.1) Pull Orion Docker Image from Docker Hub</a></li><li><a href="#22-build-your-own-orion-docker-image" class="table-of-contents__link toc-highlight">2.2) Build Your Own Orion Docker Image</a></li></ul></li><li><a href="#3-start-orion-in-a-docker-container" class="table-of-contents__link toc-highlight">3) Start Orion in a Docker Container</a><ul><li><a href="#31-volumes-for-persistant-storage-configuration-and-crypto-materials" class="table-of-contents__link toc-highlight">3.1) Volumes for Persistant Storage, Configuration, and Crypto Materials</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/orion-server/docs/getting-started/guide">Getting Started</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items"><li class="footer__item"><a href="https://stackoverflow.com/questions/tagged/orion" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Stack Overflow<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_tjMl"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://discordapp.com/invite/orion" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Discord<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_tjMl"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://twitter.com/orion" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_tjMl"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/orion-server/blog">Blog</a></li><li class="footer__item"><a href="https://github.com/hyperledger-labs/orion-server" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_tjMl"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright Â© 2022 Hyperledger Orion</div></div></div></footer></div>
<script src="/orion-server/assets/js/runtime~main.3b1b7571.js"></script>
<script src="/orion-server/assets/js/main.08f2dd10.js"></script>
</body>
</html>