<!doctype html>
<html class="docs-version-current" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.8">
<link rel="alternate" type="application/rss+xml" href="/orion-server/blog/rss.xml" title="Hyperledger Orion RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/orion-server/blog/atom.xml" title="Hyperledger Orion Atom Feed"><title data-react-helmet="true">Block Skip Chain | Hyperledger Orion</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:url" content="https://hyperledger-labs.github.io/orion-server/docs/architecture-and-design/block-skip-chain"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="Block Skip Chain | Hyperledger Orion"><meta data-react-helmet="true" name="description" content="Proofs algorithm based on skiplist like chain"><meta data-react-helmet="true" property="og:description" content="Proofs algorithm based on skiplist like chain"><link data-react-helmet="true" rel="shortcut icon" href="/orion-server/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://hyperledger-labs.github.io/orion-server/docs/architecture-and-design/block-skip-chain"><link data-react-helmet="true" rel="alternate" href="https://hyperledger-labs.github.io/orion-server/docs/architecture-and-design/block-skip-chain" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://hyperledger-labs.github.io/orion-server/docs/architecture-and-design/block-skip-chain" hreflang="x-default"><link rel="stylesheet" href="/orion-server/assets/css/styles.f8b45538.css">
<link rel="preload" href="/orion-server/assets/js/runtime~main.3b1b7571.js" as="script">
<link rel="preload" href="/orion-server/assets/js/main.08f2dd10.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#" class="skipToContent_Zhym">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/orion-server/"><div class="navbar__logo"><img src="/orion-server/img/logo.svg" alt="Orion" class="themedImage_X7X7 themedImage--light_n7cD"><img src="/orion-server/img/logo.svg" alt="Orion" class="themedImage_X7X7 themedImage--dark_WTCb"></div><b class="navbar__title">Orion</b></a><a class="navbar__item navbar__link" href="/orion-server/docs/introduction">Docs</a><a class="navbar__item navbar__link" href="/orion-server/blog">Blog</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/hyperledger-labs/orion-server" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_tjMl"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><div class="toggle_7DKP toggle_gM5N toggleDisabled_YcJ9"><div class="toggleTrack_pr3n" role="button" tabindex="-1"><div class="toggleTrackCheck_1VIP"><span class="toggleIcon_iGPa">ðŸŒœ</span></div><div class="toggleTrackX_-cNO"><span class="toggleIcon_iGPa">ðŸŒž</span></div><div class="toggleTrackThumb_4edW"></div></div><input type="checkbox" class="toggleScreenReader_BFa8" aria-label="Switch between dark and light mode"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docs-wrapper docs-doc-page"><div class="docPage_ntW3"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_Cy7D" type="button"></button><aside class="docSidebarContainer_ZbqI"><div class="sidebar_bpFd"><nav class="menu thin-scrollbar menu_fJBT"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/orion-server/docs/introduction">Hyperledger Orion</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Getting Started</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Design Principles</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">User Cases</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#">Architecture and Design</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/orion-server/docs/architecture-and-design/internals">Orion Node&#x27;s Internal</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/orion-server/docs/architecture-and-design/transaction-flow">Transaction Flow</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/orion-server/docs/architecture-and-design/query-flow">Query Flow</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/orion-server/docs/architecture-and-design/block-structure">Block Structure</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/orion-server/docs/architecture-and-design/transactions-structure">Transaction Structure</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/orion-server/docs/architecture-and-design/query-syntax">JSON Query Syntax</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/orion-server/docs/architecture-and-design/acl-read">Fine-grained Read Access Control</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/orion-server/docs/architecture-and-design/acl-write">Fine-grained Write Access Control</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/orion-server/docs/architecture-and-design/multi-sign-datatx">Multi-Sign Data Transaction</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/orion-server/docs/architecture-and-design/provenance-data">Provenance Data</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/orion-server/docs/architecture-and-design/state-merkle-patricia-tree">State Merkle Patricia Tree</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/orion-server/docs/architecture-and-design/tx-merkle-tree">Transaction Merkle Tree</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/orion-server/docs/architecture-and-design/block-skip-chain">Block Skip Chain</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Security and Trust Model</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/orion-server/docs/rest-api-specifications">REST API Specification</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/orion-server/docs/roadmap">Roadmap</a></li></ul></nav></div></aside><main class="docMainContainer_QBea"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_R67y"><div class="docItemContainer_fRP7"><article><div class="tocCollapsible_caTw theme-doc-toc-mobile tocMobile_QgRD"><button type="button" class="clean-btn tocCollapsibleButton_YFWb">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Block Skip Chain</h1></header><h2 class="anchor anchorWithStickyNavbar_7Y9k" id="proofs-algorithm-based-on-skiplist-like-chain">Proofs algorithm based on skiplist like chain<a aria-hidden="true" class="hash-link" href="#proofs-algorithm-based-on-skiplist-like-chain" title="Direct link to heading">â€‹</a></h2><p>To prove ledger consistency, we need to prove that a block is part of the ledger, using blockchain properties, like the hash of the previous block.</p><p>The naive implementation is to return all block hashes from the genesis block to the block we want to validate, given users already keep the genesis block locally. The size of the proof is O(N), which is not acceptable for big ledgers.</p><p>Bitcoin-like ledgers use this approach because ledger blocks are already replicated between clients and stored locally.</p><p>Here we discuss implementation, which provides proof of O(log(N)) size, computation, and space-efficiency.</p><p>If the <img src="https://render.githubusercontent.com/render/math?math=BlockIndex \mod 2^{i} = 0"> block header, in addition to the previous block hash, should contain the hash of the <img src="https://render.githubusercontent.com/render/math?math=BlockIndex - 2^{i}"> block (see the example below)
<img alt="Block Skip List" src="/orion-server/assets/images/BlockSkipList-2509c9fa18575e03890cc838447e2961.png"><br>
<!-- -->it&#x27;s worth mentioning, that the block with index <img src="https://render.githubusercontent.com/render/math?math=2^{i}"> will contain <em>i</em> hashes in its header.</p><h3 class="anchor anchorWithStickyNavbar_7Y9k" id="ledger-connectivity-proof-example">Ledger connectivity proof example<a aria-hidden="true" class="hash-link" href="#ledger-connectivity-proof-example" title="Direct link to heading">â€‹</a></h3><p>The validation algorithm finds the shortest path from the last block in the ledger to block <em>i</em> and from block <em>i</em> to the genesis block. The result is a list of <code>BlockHeader</code> containing each block in the path.</p><ul><li>Let&#x27;s mark blocks in the picture as 0,1,...,7,8</li><li>To generate a proof for block 3<ul><li>First we build a path from the last block to 3<ul><li>Adding the header of the last block, 8</li><li>8 has 4 hashes, one of them to block 4, so adding 4&#x27;s header</li><li>4 has access to 3, so we add 3&#x27;s header as well, for consistency</li></ul></li><li>Next stage is to find the path to the genesis block<ul><li>Block 3 contains only one hash, of block 2, so we add the header of block 2</li><li>Block 2 contains two hashes, block 1 and block 0, so we add the block 0 hash</li></ul></li><li>As a result, we now have (8, 4, 3, 2, 0)</li><li>Now let&#x27;s reverse it, because it&#x27;s easier to validate hashes for the genesis block</li></ul></li><li>Validation of proof is done by checking hash references in all the blocks in the path</li></ul><h3 class="anchor anchorWithStickyNavbar_7Y9k" id="proof-generation-and-validation-algorithm">Proof generation and validation algorithm<a aria-hidden="true" class="hash-link" href="#proof-generation-and-validation-algorithm" title="Direct link to heading">â€‹</a></h3><p>For detailed ledger connectivity proof generation and verification, see <a href="/orion-server/docs/getting-started/proofs-and-verification/proofs#ledger-connectivity-proof">here</a>.</p></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/orion-server/docs/architecture-and-design/tx-merkle-tree"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Â« <!-- -->Transaction Merkle Tree</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/orion-server/docs/security-and-trust-model/authentication"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Crypto-Based Authentication<!-- --> Â»</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_1gSR thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#proofs-algorithm-based-on-skiplist-like-chain" class="table-of-contents__link toc-highlight">Proofs algorithm based on skiplist like chain</a><ul><li><a href="#ledger-connectivity-proof-example" class="table-of-contents__link toc-highlight">Ledger connectivity proof example</a></li><li><a href="#proof-generation-and-validation-algorithm" class="table-of-contents__link toc-highlight">Proof generation and validation algorithm</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/orion-server/docs/getting-started/guide">Getting Started</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items"><li class="footer__item"><a href="https://stackoverflow.com/questions/tagged/orion" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Stack Overflow<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_tjMl"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://discordapp.com/invite/orion" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Discord<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_tjMl"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://twitter.com/orion" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_tjMl"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/orion-server/blog">Blog</a></li><li class="footer__item"><a href="https://github.com/hyperledger-labs/orion-server" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_tjMl"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright Â© 2022 Hyperledger Orion</div></div></div></footer></div>
<script src="/orion-server/assets/js/runtime~main.3b1b7571.js"></script>
<script src="/orion-server/assets/js/main.08f2dd10.js"></script>
</body>
</html>